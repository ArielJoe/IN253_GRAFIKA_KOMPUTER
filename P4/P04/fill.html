<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #canvas1 {
            border: 3px solid black;
        }
    </style>
</head>

<body>
    <canvas id="canvas1" width="800" height="600">
    </canvas>

    <script>

        function gambar_titik(imageDataA, x, y, r, g, b) {
            var index;
            index = 4 * (Math.ceil(x) + (Math.ceil(y) * cnv.width));
            imageDataA.data[index] = r; // R
            imageDataA.data[index + 1] = g; // G
            imageDataA.data[index + 2] = b; // B
            imageDataA.data[index + 3] = 255; // alpha
        }

        function dda_line(imageDataA, x1, y1, x2, y2, r, g, b) {
            var dx, dy;
            dx = x2 - x1;
            dy = y2 - y1;

            if (Math.abs(dx) > Math.abs(dy)) {
                if (x1 > x2) {
                    var y = y1;
                    for (var x = x1; x > x2; x--) {
                        y += dy / Math.abs(dx);
                        gambar_titik(imageDataA, x, y, r, g, b);
                    }
                } else {
                    var y = y1;
                    for (var x = x1; x < x2; x++) {
                        y += dy / Math.abs(dx);
                        gambar_titik(imageDataA, x, y, r, g, b);
                    }
                }
            } else {
                if (y1 > y2) {
                    var x = x1;
                    for (var y = y1; y > y2; y--) {
                        x += dx / Math.abs(dy);
                        gambar_titik(imageDataA, x, y, r, g, b);
                    }
                } else {
                    var x = x1;
                    for (var y = y1; y < y2; y++) {
                        x += dx / Math.abs(dy);
                        gambar_titik(imageDataA, x, y, r, g, b);
                    }
                }
            }
        }

        function lingkaran(imagedataA, xc, yc, radius, r, g, b) {
            for (var x = xc - radius; x < xc + radius; x++) {
                var y = yc + Math.sqrt(Math.pow(radius, 2) - Math.pow((x - xc), 2));
                gambar_titik(imagedataA, x, y, r, g, b);
                var y = yc + Math.sqrt(Math.pow(radius, 2) - Math.pow((x - xc), 2));
                gambar_titik(imagedataA, y, x, r, g, b);
            }
            for (var x = xc - radius; x < xc + radius; x++) {
                var y = yc - Math.sqrt(Math.pow(radius, 2) - Math.pow((x - xc), 2));
                gambar_titik(imagedataA, x, y, r, g, b);
                var y = yc - Math.sqrt(Math.pow(radius, 2) - Math.pow((x - xc), 2));
                gambar_titik(imagedataA, y, x, r, g, b);
            }
        }

        function lingkaran_polar(imagedataA, xc, yc, radius, r, g, b) {
            for (var theta = 0; theta < 2 * Math.PI; theta += 0.01) {
                x = xc + radius * Math.cos(theta);
                y = yc + radius * Math.sin(theta);
                gambar_titik(imagedataA, x, y, r, g, b);
            }
        }

        function elips(imagedataA, xc, yc, radius, r, g, b) {
            for (var theta = 0; theta < 2 * Math.PI; theta += 0.01) {
                x = xc + radius * Math.cos(theta);
                y = yc + (radius / 2) * Math.sin(theta);
                gambar_titik(imagedataA, x, y, r, g, b);
            }
        }

        function bunga(imagedataA, xc, yc, radius, n, r, g, b) {
            for (var theta = 0; theta < 2 * Math.PI; theta += 0.01) {
                x = xc + radius * Math.cos(theta * n) * Math.cos(theta);
                y = yc + radius * Math.cos(theta * n) * Math.sin(theta);
                gambar_titik(imagedataA, x, y, r, g, b);
            }
        }

        function floodFillNaive(imageDataA, canvas, x, y, toFlood, color) {
            var index = 4 * (x + (y * cnv.width));
            var r1 = imageDataA.data[index];
            var g1 = imageDataA.data[index + 1];
            var b1 = imageDataA.data[index + 2];
            if (r1 == toFlood.r && g1 == toFlood.g && b1 == toFlood.b) {
                imageDataA.data[index] = color.r;
                imageDataA.data[index + 1] = color.g;
                imageDataA.data[index + 2] = color.b;
                imageDataA.data[index + 3] = 255;
                floodFillNaive(imageDataA, canvas, x + 1, y, toFlood, color);
                floodFillNaive(imageDataA, canvas, x - 1, y, toFlood, color);
                floodFillNaive(imageDataA, canvas, x, y + 1, toFlood, color);
                floodFillNaive(imageDataA, canvas, x, y - 1, toFlood, color);
            }
        }

        function floodFillStack(imageDataA, canvas, x0, y0, toFlood, color) {

            var stackTumpukan = [];
            stackTumpukan.push({ x: x0, y: y0 });
            while (stackTumpukan.length > 0) {
                var titik_sekarang = stackTumpukan.pop();
                var index_sekarang = 4 * (titik_sekarang.x + (titik_sekarang.y * cnv.width));
                var r1 = imageDataA.data[index_sekarang];
                var g1 = imageDataA.data[index_sekarang + 1];
                var b1 = imageDataA.data[index_sekarang + 2];
                if (r1 == toFlood.r && g1 == toFlood.g && b1 == toFlood.b) {
                    imageDataA.data[index_sekarang] = color.r;
                    imageDataA.data[index_sekarang + 1] = color.g;
                    imageDataA.data[index_sekarang + 2] = color.b;
                    imageDataA.data[index_sekarang + 3] = 255;
                    stackTumpukan.push({ x: titik_sekarang.x + 1, y: titik_sekarang.y });
                    stackTumpukan.push({ x: titik_sekarang.x - 1, y: titik_sekarang.y });
                    stackTumpukan.push({ x: titik_sekarang.x, y: titik_sekarang.y + 1 });
                    stackTumpukan.push({ x: titik_sekarang.x, y: titik_sekarang.y - 1 });
                }
            }
        }

        var cnv = document.querySelector("#canvas1");

        var context1;
        context1 = cnv.getContext("2d");
        var imageDataA = context1.getImageData(0, 0, cnv.width, cnv.height);

        lingkaran(imageDataA, 50, 50, 30, 0, 0, 255);
        floodFillStack(imageDataA, cnv, 50, 50, { r: 0, g: 0, b: 0 }, { r: 0, g: 255, b: 0 })
        context1.putImageData(imageDataA, 0, 0);
    </script>
</body>

</html>